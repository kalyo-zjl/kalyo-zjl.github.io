<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>TensorFlow · KaLyo's Notes</title><meta name="description" content="TensorFlow - zjl"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><!-- fonts--><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="http://fonts.lug.ustc.edu.cn/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><input type="checkbox" id="sidebar-toggle" checked><aside><div class="author"><a href="/."><img src="/img/author.png" class="author-img"></a><h2 class="author-name">zjl</h2></div><div class="post-toc"><span class="toc-title">Directory</span><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#git-clone-tensorflow"><span class="toc-text">git clone tensorflow</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dependencies"><span class="toc-text">dependencies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Install-tensorflow"><span class="toc-text">Install tensorflow</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Configure-the-installation"><span class="toc-text">Configure the installation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-the-pip-package-and-install"><span class="toc-text">Create the pip package and install</span></a></li></ol></li></ol></div><div class="social"><span class="title">Social</span><ul class="links"><li class="link-item"><a href="mailto:zjialiang@zju.edu.cn"><div class="iconfont icon-email"> </div>email</a></li><li class="link-item"><a href="https://github.com/kalyo-zjl"><div class="iconfont icon-github"> </div>github</a></li><li class="link-item"><a href="http://weibo.com/3628435143/profile?topnav=1&amp;wvr=6&amp;is_all=1"><div class="iconfont icon-weibo"> </div>weibo</a></li><li class="link-item"><a href="https://www.zhihu.com/people/rangnixinyue"><div class="iconfont icon-zhihu"> </div>zhihu</a></li></ul></div></aside><div class="main"><header><div id="top"><a href="/." class="logo-link">KaLyo's Notes</a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">Archives</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">Tags</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">About</a></li></ul></div></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">TensorFlow</h1><div class="post-time">Jul 7, 2016</div><div class="post-content"><p>tensorflow&#x662F;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x7684;&#x4E00;&#x4E2A;&#x6846;&#x67B6;.&#x56E0;&#x4E3A;&#x5728;&#x8DD1;<a href="https://github.com/trigeorgis/MDM" target="_blank" rel="external">mdm</a>&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x7528;&#x5230;,&#x800C;&#x4E14;&#x4F5C;&#x8005;&#x662F;&#x5728;tensorflow&#x7684;&#x6E90;&#x7801;&#x57FA;&#x7840;&#x4E0A;&#x52A0;&#x4E86;&#x4E00;&#x4E9B;C++ops,&#x6240;&#x4EE5;&#x6709;&#x4ECE;&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x7684;&#x9700;&#x8981;.<br>&#x4E0B;&#x9762;&#x8BB2;&#x5728;&#x8FDB;&#x884C;&#x6E90;&#x7801;&#x7F16;&#x8BD1;tensorflow&#x7684;&#x65F6;&#x5019;&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x4E0E;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;.</p>
<h2 id="git-clone-tensorflow"><a href="#git-clone-tensorflow" class="headerlink" title="git clone tensorflow"></a>git clone tensorflow</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:trigeorgis/tensorflow.git</span><br></pre></td></tr></table></figure>
<p>This is a fork of Tensorflow (#ff75787c) but it includes some extra C++ ops, such as for the extraction of patches around the landmarks.</p>
<a id="more"></a>
<h2 id="dependencies"><a href="#dependencies" class="headerlink" title="dependencies"></a>dependencies</h2><p>&#x5176;&#x4ED6;&#x7684;&#x5E94;&#x8BE5;&#x901A;&#x8FC7;apt-get&#x90FD;&#x80FD;&#x76F4;&#x63A5;&#x5B89;&#x88C5;,&#x8BB2;&#x4E0B;Bazel&#x7684;&#x5B89;&#x88C5;.Bazel&#x662F;&#x8C37;&#x6B4C;&#x7684;&#x4E00;&#x4E2A;&#x8F6F;&#x4EF6;,&#x7C7B;&#x4F3C;&#x4E8E;cmake.Bazel&#x4F9D;&#x8D56;&#x4E8E;JDK8,&#x6240;&#x4EE5;&#x8981;&#x5148;&#x5B89;&#x88C5;JDK8,&#x5B9E;&#x9645;&#x4E0A;,&#x6309;&#x7167;<a href="http://www.bazel.io/docs/install.html" target="_blank" rel="external">Bazel&#x5B98;&#x7F51;</a>&#x7684;&#x6B65;&#x9AA4;&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#x5C31;&#x53EF;&#x4EE5;.</p>
<ul>
<li><p>Install JDK8</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo add-apt-repository ppa:webupd8team/java</span><br><span class="line">$ sudo apt-get update			<span class="comment"># &#x5728;&#x8FD9;&#x4E00;&#x6B65;&#x7684;&#x65F6;&#x5019;&#x56E0;&#x4E3A;&#x6211;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x5899;&#x5916;&#x7684;&#x7F51;&#x7AD9;,&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x4E86;</span></span><br><span class="line">$ sudo apt-get install oracle-java8-installer</span><br></pre></td></tr></table></figure>
</li>
<li><p>Add Bazel distribution URI as a package source (one time setup)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;deb http://storage.googleapis.com/bazel-apt stable jdk1.8&quot;</span> | sudo tee /etc/apt/sources.list.d/bazel.list</span><br><span class="line">$ curl https://storage.googleapis.com/bazel-apt/doc/apt-key.pub.gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure>
</li>
<li><p>Install Bazel</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install bazel</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Install-tensorflow"><a href="#Install-tensorflow" class="headerlink" title="Install tensorflow"></a>Install tensorflow</h2><h3 id="Configure-the-installation"><a href="#Configure-the-installation" class="headerlink" title="Configure the installation"></a>Configure the installation</h3><p>&#x8FDB;&#x5165;tensorflow&#x6587;&#x4EF6;&#x5939;,&#x6709;&#x4E00;&#x4E2A;configure&#x6587;&#x4EF6;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ./configure</span><br><span class="line"><span class="comment"># &#x8FD9;&#x4E00;&#x6B65;&#x4E3B;&#x8981;&#x662F;locate&#x4F60;&#x7684;python&#x7684;&#x4F4D;&#x7F6E;&#x4EE5;&#x53CA;&#x662F;&#x5426;&#x5B89;&#x88C5;CUDA&#x7B49;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment"># &#x6CE8;&#x610F;,&#x5728;&#x7B2C;&#x4E8C;&#x6B65;,&#x8BE2;&#x95EE;&#x4F60;&#x662F;&#x5426;&#x5B89;&#x88C5;&#x5173;&#x4E8E;google&#x4E91;&#x670D;&#x52A1;&#x7684;&#x4E1C;&#x897F;&#x7684;&#x65F6;&#x5019;,&#x52A1;&#x5FC5;&#x8981;&#x9009;&#x62E9;NONONONO,&#x4E0D;&#x7136;&#x4F1A;&#x6709;&#x5404;&#x79CD;&#x5404;&#x6837;&#x7684;&#x9EBB;&#x70E6;.</span></span><br><span class="line"><span class="comment"># &#x5982;&#x679C;&#x4E0D;&#x5C0F;&#x5FC3;&#x9009;&#x4E86;yes,&#x800C;&#x4F60;&#x53C8;&#x5728;&#x5899;&#x5185;&#x7684;&#x8BDD;,&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x7684;&#x4E00;&#x4E2A;&#x53EB;&#x505A; boringssl&#x662F;&#x5728;google&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;,</span></span><br><span class="line"><span class="comment"># &#x6240;&#x4EE5;,&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x7F51;&#x5740;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;,&#x5927;&#x81F4;&#x5C31;&#x662F;&#x5C06;google&#x4E0A;&#x7684;&#x8FD9;&#x4E2A;git,fork&#x5230;&#x4F60;&#x80FD;&#x8BBF;&#x95EE;&#x7684;github&#x4E0B;,</span></span><br><span class="line"><span class="comment"># &#x7136;&#x540E;&#x5230;&#x8FD9;&#x4E2A;github&#x4E0B;&#x8FDB;&#x884C;&#x4E0B;&#x8F7D;,&#x4E0D;&#x8FC7;&#x6211;&#x53D1;&#x73B0;,google git&#x4E0A;&#x7684;boringssl master&#x5206;&#x652F;&#x672C;&#x8EAB;&#x5C31;&#x7F3A;&#x5C11;&#x4E00;&#x4E9B;&#x6587;&#x4EF6;,</span></span><br><span class="line"><span class="comment"># &#x81F3;&#x5C11;&#x5728;&#x6211;&#x5B89;&#x88C5;&#x7684;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x7684;tensorflow&#x4E0B;.</span></span><br></pre></td></tr></table></figure></p>
<p><a href="https://github.com/tensorflow/tensorflow/issues/1387" target="_blank" rel="external">For poor guys without access to boringssl located in google&#x2019;s server&#x2019;</a></p>
<p>&#x5728;&#x8BBE;&#x7F6E;python&#x7684;&#x4F4D;&#x7F6E;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x5F88;&#x91CD;&#x8981;,&#x56E0;&#x4E3A;mdm&#x8FD8;&#x9700;&#x8981;<a href="">menpo</a>,&#x800C;&#x8FD9;&#x4E2A;&#x4EBA;&#x8138;&#x5E93;&#x63A8;&#x8350;&#x5728;anaconda&#x4E0B;&#x88C5;,&#x6240;&#x4EE5;&#x8981;&#x5728;&#x8BBE;&#x7F6E;python&#x7684;&#x4F4D;&#x7F6E;&#x7684;&#x65F6;&#x5019;,&#x8BBE;&#x7F6E;&#x6210;&#x7C7B;&#x4F3C;&#x5982;&#x4E0B;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Please specify the location of python. [Default is /usr/bin/python]:</span><br><span class="line">/home/zjl/anaconda2/bin/python</span><br></pre></td></tr></table></figure></p>
<p>&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x51B5;:<br>A python &#x88C5;&#x4E86;menpo&#x6CA1;&#x88C5;tensorflow,<br>B python &#x88C5;&#x4E86;tensorflow&#x6CA1;&#x88C5;menpo.<br>&#x5BFC;&#x81F4;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;python&#x73AF;&#x5883;&#x90FD;&#x65E0;&#x6CD5;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x8FD9;&#x4E24;&#x4E2A;&#x5E93;.</p>
<p>&#x8BBE;&#x7F6E;&#x5B8C;&#x6210;&#x540E;,&#x4EE5;&#x540E;&#x5B89;&#x88C5;&#x7684;tensorflow&#x4F1A;&#x5728;/home/zjl/anaconda2/lib/python2.7/site-packages/tensorflow&#x4E0B;</p>
<h3 id="Create-the-pip-package-and-install"><a href="#Create-the-pip-package-and-install" class="headerlink" title="Create the pip package and install"></a>Create the pip package and install</h3><p>&#x5B98;&#x7F51;&#x4E0A;&#x6709;&#x4E00;&#x6B65;&#x53EB;Build your target with GPU support,&#x90A3;&#x4E00;&#x6B65;&#x53EA;&#x662F;&#x8FDB;&#x884C;&#x5E95;&#x5C42;&#x7684;&#x7F16;&#x8BD1;,&#x8DD1;&#x4E2A;&#x4F8B;&#x5B50;&#x800C;&#x5DF2;,&#x5E76;&#x6CA1;&#x6709;python&#x7684;wrapper,&#x6240;&#x4EE5;&#x8FDB;&#x884C;&#x90A3;&#x4E24;&#x6B65;&#x4E4B;&#x540E;&#x5728;python&#x4E0B;import tensorflow&#x8FD8;&#x662F;&#x4F1A;&#x51FA;&#x73B0;no module named tensorflow</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ bazel build -c opt //tensorflow/tools/pip_package:build_pip_package</span><br><span class="line"></span><br><span class="line"><span class="comment"># To build with GPU support:</span></span><br><span class="line">$ bazel build -c opt --config=cuda //tensorflow/tools/pip_package:build_pip_package</span><br><span class="line"></span><br><span class="line">$ bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg</span><br><span class="line"></span><br><span class="line"><span class="comment"># The name of the .whl file will depend on your platform.</span></span><br><span class="line">$ sudo pip install /tmp/tensorflow_pkg/tensorflow-0.9.0-py2-none-any.whl</span><br><span class="line"><span class="comment"># &#x8FD9;&#x91CC;whl&#x5305;&#x7684;&#x540D;&#x5B57;&#x8981;&#x6839;&#x636E;&#x4F60;&#x76F8;&#x5E94;&#x751F;&#x6210;&#x7684;&#x8FDB;&#x884C;&#x4FEE;&#x6539;</span></span><br></pre></td></tr></table></figure>
</div></article></div><div class="tags"><a href="/tags/tensorflow/">tensorflow</a></div><div class="paginator"><a href="/2016/07/07/Hexo/" class="prev"><i class="fa fa-chevron-left"></i><span> Prev</span></a><a href="/2016/06/12/learning_linux/" class="next"><span>Next</span><i class="fa fa-chevron-right"></i></a></div></section><section id="comments"><div data-thread-key="http://yoursite.com/2016/07/07/TensorFlow/index.html" data-title="TensorFlow" data-url="http://yoursite.com/2016/07/07/TensorFlow/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "kalyo-zjl" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section><footer><label for="sidebar-toggle" class="sidebar-menu"><i class="fa fa-bars"></i></label><label id="back2top"> <i class="fa fa-chevron-up"></i></label><div class="copyright"><p>© 2016<span class="heart"><i class="icon-next-heart fa fa-heart"></i></span><a href="http://yoursite.com">zjl</a></p></div></footer></div></body><script src="/js/back2top.js"></script></html>