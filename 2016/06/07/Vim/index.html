<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Vim · KaLyo's Notes</title><meta name="description" content="Vim - zjl"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><!-- fonts--><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="http://fonts.lug.ustc.edu.cn/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><input type="checkbox" id="sidebar-toggle" checked><aside><div class="author"><a href="/."><img src="/img/author.png" class="author-img"></a><h2 class="author-name">zjl</h2></div><div class="post-toc"><span class="toc-title">Directory</span><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装vim"><span class="toc-text">安装vim</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vimrc"><span class="toc-text">.vimrc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vim的一些实用技巧"><span class="toc-text">vim的一些实用技巧</span></a></li></ol></div><div class="social"><span class="title">Social</span><ul class="links"><li class="link-item"><a href="mailto:zjialiang@zju.edu.cn"><div class="iconfont icon-email"> </div>email</a></li><li class="link-item"><a href="https://github.com/kalyo-zjl"><div class="iconfont icon-github"> </div>github</a></li><li class="link-item"><a href="http://weibo.com/3628435143/profile?topnav=1&amp;wvr=6&amp;is_all=1"><div class="iconfont icon-weibo"> </div>weibo</a></li></ul></div></aside><div class="main"><header><div id="top"><a href="/." class="logo-link">KaLyo's Notes</a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">Archives</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">Tags</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">About</a></li></ul></div></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Vim</h1><div class="post-time">Jun 7, 2016</div><div class="post-content"><h2 id="安装vim"><a href="#安装vim" class="headerlink" title="安装vim"></a>安装vim</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install vim</span><br></pre></td></tr></table></figure>
<ul>
<li>为了后面使用vim更多的插件功能，推荐从源码编译vim<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:vim/vim.git</span><br><span class="line">$ <span class="built_in">cd</span> vim/</span><br><span class="line">$ ./configure --with-features=huge --enable-pythoninterp --enable-rubyinterp --enable-luainterp --enable-perlinterp --with-python-config-dir=/usr/lib/python2.7/config-x86_64-linux-gnu/ --enable-gui=gtk2 --enable-cscope --prefix=/usr</span><br><span class="line">$ make</span><br><span class="line">$ <span class="built_in">cd</span> src</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="vimrc"><a href="#vimrc" class="headerlink" title=".vimrc"></a>.vimrc</h2><p>vim的配置文件，可以配置一套自己的vim环境<br>vim的插件也同样强大，管理插件推荐使用<a href="https://github.com/VundleVim/Vundle.vim" target="_blank" rel="external">Vundle</a><br>插件神器<a href="https://github.com/Valloric/YouCompleteMe" target="_blank" rel="external">YouCompleteMe</a>,良好的自动补全和代码跳转等</p>
<h2 id="vim的一些实用技巧"><a href="#vim的一些实用技巧" class="headerlink" title="vim的一些实用技巧"></a>vim的一些实用技巧</h2><ul>
<li>note. vim 支持在vim下执行shell命令，比如:ls，也支持（分屏）管理多个文件。<br>不过，这里不对这些技巧进行介绍,因为利用<a href="https://tmux.github.io" target="_blank" rel="external">tmux</a>的多终端使用起来更方便。 </li>
</ul>
<p>下面的一些技巧建立在对vim的基本操作比较了解的基础上</p>
<ul>
<li><p><strong>.</strong> dot command<br>重复上次修改，比如上回的命令是daw，则<strong>.</strong>相当于再次执行daw<br><strong>attention</strong>:  <strong>.</strong> 不包括移动命令，学好vim就是要学好2个，1是操作符，2是动作命令</p>
</li>
<li><p>注释多行 comment<br>有时候需要注释一段代码，或者在一段代码的后面都加上 ;</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">        <span class="comment">#首先光标移动到第一行行首</span></span><br><span class="line">&lt;C-v&gt;   <span class="comment">#进入visual block模式</span></span><br><span class="line">        <span class="comment">#光标下移选中所有行</span></span><br><span class="line">I<span class="comment">#&lt;Esc&gt; #在选中的block之前插入#</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">        <span class="comment">#首先光标移动到第一行行首</span></span><br><span class="line">&lt;C-v&gt;   <span class="comment">#进入visual block模式</span></span><br><span class="line">        <span class="comment">#光标下移选中所有行</span></span><br><span class="line">$       <span class="comment">#跳转到行尾</span></span><br><span class="line">A;&lt;Esc&gt; <span class="comment">#在选中的block后面插入;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 由下面commad mode，可以有另外的方法</span></span><br><span class="line">:3,5normal A;   <span class="comment">#在第三行到第五行的末尾加上 ;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>;</strong> command<br>; 命令会执行上次执行过的f{char}操作</li>
</ul>
<ul>
<li><p>delete a word</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">daw    <span class="comment">#delete a word</span></span><br><span class="line">diw    <span class="comment"># i for inside</span></span><br><span class="line">di<span class="string">"    # delete inside "</span><span class="string">"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>operation in Insert Mode(so as in Bash shell)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;C-h&gt;   <span class="comment"># Backspace</span></span><br><span class="line">&lt;C-w&gt;   <span class="comment"># delete last word</span></span><br><span class="line">&lt;C-u&gt;   <span class="comment"># delete to the beginning of the line</span></span><br><span class="line">&lt;C-r&gt;0  <span class="comment"># put the content in register 0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>visual mode</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">o       <span class="comment">#切换高亮区的选端</span></span><br><span class="line">gv      <span class="comment">#选中上一次高亮区</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>command mode</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ex命令执行有时候比普通模式命令更快</span></span><br><span class="line">:3d     <span class="comment">#删除第三行</span></span><br><span class="line">3G dd   <span class="comment">#删除第三行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令执行范例</span></span><br><span class="line"><span class="comment"># 范式</span></span><br><span class="line"><span class="comment"># :&#123;start&#125;.&#123;end&#125;p</span></span><br><span class="line">:2,5p           <span class="comment">#打印2-5行</span></span><br><span class="line">:.,<span class="variable">$p</span>           <span class="comment">#打印当前位置到文末</span></span><br><span class="line"><span class="comment"># :[range]t&#123;address&#125;</span></span><br><span class="line"><span class="comment"># t for copy and m for move</span></span><br><span class="line">:6t.            <span class="comment">#复制第六行的内容到当前行</span></span><br><span class="line">:<span class="string">'&lt;,'</span>&gt;t0        <span class="comment">#把高亮选中的行复制到文件开头</span></span><br><span class="line"></span><br><span class="line">:<span class="string">'&lt;,'</span>&gt;normal.   <span class="comment">#对高亮区下的每一行执行normal下的.操作</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>history</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">q/      <span class="comment">#打开查找命令历史的命令行窗口</span></span><br><span class="line">q:      <span class="comment">#打开Ex命令历史的命令行窗口</span></span><br><span class="line">&lt;C<span class="_">-f</span>&gt;   <span class="comment">#在各自模式下调出各自的窗口</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>movement</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">j       <span class="comment">#实际行移动</span></span><br><span class="line">gj      <span class="comment">#屏幕行移动</span></span><br><span class="line">w       <span class="comment">#下个词首</span></span><br><span class="line">e       <span class="comment">#下个词尾</span></span><br><span class="line">b       <span class="comment">#上个词首</span></span><br><span class="line">ge      <span class="comment">#上个词尾</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置标记与跳转</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m&#123;a-zA-Z&#125;       <span class="comment"># 标记</span></span><br><span class="line">`&#123;mark&#125;         <span class="comment"># 倒转到标记为mark的地方</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>寄存器register</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># :h regsters for help</span></span><br><span class="line"><span class="string">""</span>          <span class="comment">#默认寄存器</span></span><br><span class="line"><span class="string">"bp         #粘贴来及寄存器b的东西</span><br><span class="line">"</span>add        <span class="comment">#删除一行，并放到寄存器a中</span></span><br><span class="line"><span class="string">"_          #黑洞</span><br><span class="line">"</span>+          <span class="comment">#系统寄存器，需要gvim下才可以使用的样子，就不用了</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Macro 宏(很有用)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># key q to start/Stop a Macro</span></span><br><span class="line">qa          <span class="comment">#开始录制宏a,实际上是存在寄存器a中</span></span><br><span class="line">...</span><br><span class="line">q           <span class="comment">#结束录制宏</span></span><br><span class="line"><span class="comment"># @&#123;register&#125; 执行宏</span></span><br><span class="line">@a</span><br><span class="line">@@          <span class="comment">#执行上一次执行的宏</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#按次序编号</span></span><br><span class="line">            <span class="comment">#利用下面2命令加上宏可以循环</span></span><br><span class="line">:<span class="built_in">let</span> i=1    <span class="comment">#赋值i,存在"=中</span></span><br><span class="line">&lt;C-r&gt;=i     <span class="comment">#在插入模式下将寄存器=下的i值显示</span></span><br></pre></td></tr></table></figure>
<ul>
<li>pattern<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找</span></span><br><span class="line">\c          <span class="comment">#忽略大小写</span></span><br><span class="line">\C          <span class="comment">#强制大小写</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#正则表达式搜索</span></span><br><span class="line">/<span class="comment">#\([0-9a-fA-f]\&#123;6&#125;\|[0-9a-fA-F]\&#123;3&#125;\)  # 搜索#后带3个或6个16进制符</span></span><br><span class="line"><span class="comment"># \用于转义，可以使用magic减少使用\</span></span><br><span class="line">\v          <span class="comment"># magic</span></span><br><span class="line">\V          <span class="comment"># nomagic</span></span><br><span class="line">/\v<span class="comment">#([0-9a-fA-F]&#123;6&#125;|[0-9a-fA-F]&#123;3&#125;)</span></span><br><span class="line">\v<span class="comment">#(\x&#123;6&#125;|\x&#123;3&#125;)</span></span><br><span class="line"><span class="comment"># \x 表示16进制符 更多的可以看 :h/character-classes</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#匹配重复单词</span></span><br><span class="line">/\v&lt;(\w+)\_s+\1&gt;</span><br><span class="line"><span class="comment"># 任何()里的匹配文本会被自动保存到临时仓库，用\1来引用这段文本,\_s匹配空白符或换行符</span></span><br><span class="line"><span class="comment"># &lt;the&gt; 在magic模式下是单词边界界定符,只匹配the</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># substitute替换</span></span><br><span class="line">:[range]s/&#123;pattern&#125;/&#123;string&#125;/&#123;flags&#125;</span><br><span class="line">:%s/content/copy/g      <span class="comment">#将文中所有content换成copy</span></span><br><span class="line"><span class="comment"># flages g应用于整行，n抑制替换，c询问是否修改</span></span><br><span class="line"><span class="comment"># g处理横轴 %处理纵轴</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#也可以采用逐次替换的方式</span></span><br><span class="line">/content        <span class="comment">#高亮 content 或者光标移到content上后按 *</span></span><br><span class="line">&lt;cw&gt;copy&lt;Esc&gt;   <span class="comment">#cw是一个操作 为了与copy区分开所以加了&lt;&gt;，下同</span></span><br><span class="line">n</span><br><span class="line">.</span><br></pre></td></tr></table></figure>
</div></article></div><div class="tags"><a href="/tags/vim-plugin/">vim plugin</a></div><div class="paginator"><a href="/2016/06/04/github/" class="next"><span>Next</span><i class="fa fa-chevron-right"></i></a></div></section><footer><label for="sidebar-toggle" class="sidebar-menu"><i class="fa fa-bars"></i></label><label id="back2top"> <i class="fa fa-chevron-up"></i></label><div class="copyright"><p>© 2016<span class="heart"><i class="icon-next-heart fa fa-heart"></i></span><a href="http://yoursite.com">zjl</a></p></div></footer></div></body><script src="/js/back2top.js"></script></html>