<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Github · KaLyo's Notes</title><meta name="description" content="Github - zjl"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><!-- fonts--><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="http://fonts.lug.ustc.edu.cn/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><input type="checkbox" id="sidebar-toggle" checked><aside><div class="author"><a href="/."><img src="/img/author.png" class="author-img"></a><h2 class="author-name">zjl</h2></div><div class="post-toc"><span class="toc-title">Directory</span><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装Git"><span class="toc-text">安装Git</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#本地仓库"><span class="toc-text">本地仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#本地仓库下的命令"><span class="toc-text">本地仓库下的命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#git-版本控制"><span class="toc-text">git 版本控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分支管理"><span class="toc-text">分支管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#bug分支"><span class="toc-text">bug分支</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义git"><span class="toc-text">自定义git</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#远程仓库"><span class="toc-text">远程仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一台电脑管理多个github账号"><span class="toc-text">一台电脑管理多个github账号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#远程仓库和本地仓库的交互"><span class="toc-text">远程仓库和本地仓库的交互</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#git-clone"><span class="toc-text">git clone</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#git-remote"><span class="toc-text">git remote</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#git-fetch"><span class="toc-text">git fetch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#git-pull"><span class="toc-text">git pull</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#git-push"><span class="toc-text">git push</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#example"><span class="toc-text">example</span></a></li></ol></li></ol></li></ol></div><div class="social"><span class="title">Social</span><ul class="links"><li class="link-item"><a href="mailto:zjialiang@zju.edu.cn"><div class="iconfont icon-email"> </div>email</a></li><li class="link-item"><a href="https://github.com/kalyo-zjl"><div class="iconfont icon-github"> </div>github</a></li><li class="link-item"><a href="http://weibo.com/3628435143/profile?topnav=1&amp;wvr=6&amp;is_all=1"><div class="iconfont icon-weibo"> </div>weibo</a></li></ul></div></aside><div class="main"><header><div id="top"><a href="/." class="logo-link">KaLyo's Notes</a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">Archives</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">Tags</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">About</a></li></ul></div></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Github</h1><div class="post-time">Jun 23, 2016</div><div class="post-content"><p><strong><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">Git教程</a></strong><br><strong><a href="http://www.ruanyifeng.com/blog/2014/06/git_remote.html" target="_blank" rel="external">Git远程操作详解</a></strong></p>
<h2 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install git</span><br></pre></td></tr></table></figure>
<h2 id="本地仓库"><a href="#本地仓库" class="headerlink" title="本地仓库"></a>本地仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir repo</span><br><span class="line">$ <span class="built_in">cd</span> repo</span><br><span class="line">$ git init</span><br></pre></td></tr></table></figure>
<h3 id="本地仓库下的命令"><a href="#本地仓库下的命令" class="headerlink" title="本地仓库下的命令"></a>本地仓库下的命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ touch <span class="built_in">test</span>       <span class="comment"># create a new file</span></span><br><span class="line">$ git add <span class="built_in">test</span></span><br><span class="line">$ git status       <span class="comment"># status</span></span><br><span class="line">$ git commit -m <span class="string">'add file test'</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Attention</strong>:下面的命令会删掉test文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除文件</span></span><br><span class="line">$ git rm <span class="built_in">test</span>      <span class="comment"># 文件还在</span></span><br><span class="line">$ git status       <span class="comment"># 查看现在的状态，发现已删除，还没commit</span></span><br><span class="line">$ git commit -m <span class="string">'rm file test'</span>   <span class="comment"># test文件被删除了</span></span><br><span class="line"></span><br><span class="line">$ rm <span class="built_in">test</span>          <span class="comment"># 工作区文件被删除</span></span><br><span class="line">$ git rm <span class="built_in">test</span></span><br><span class="line">$ git commit -m <span class="string">'rm test file'</span>  <span class="comment"># 版本库里文件也被删除</span></span><br><span class="line"></span><br><span class="line">$ rm <span class="built_in">test</span></span><br><span class="line">$ git checkout -- <span class="built_in">test</span>          <span class="comment"># 工作区被删除的文件又出现了</span></span><br></pre></td></tr></table></figure>
<h3 id="git-版本控制"><a href="#git-版本控制" class="headerlink" title="git 版本控制"></a>git 版本控制</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对文件进行修改之后但是还没有commit的话，可以通过diff来查看修改的内容</span></span><br><span class="line">$ git diff filename</span><br><span class="line"><span class="comment"># 或者直接指定工作区和版本库里的文件进行比较差异</span></span><br><span class="line">$ git diff HEAD -- filename</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用git log可以查看文件的不同版本</span></span><br><span class="line">$ zjl@pc:<span class="built_in">test</span>$ git <span class="built_in">log</span></span><br><span class="line">  commit de4d98b9daec8899b2b7c1a980da949897710947</span><br><span class="line">  Author: kalyo-zjl &lt;zjialiang@zju.edu.cn&gt;</span><br><span class="line">  Date:   Sat Jun 18 14:29:43 2016 +0800</span><br><span class="line"> </span><br><span class="line">      change</span><br><span class="line"> </span><br><span class="line">  commit 8a369b121<span class="built_in">fc</span>61c9774da42f480dcbad903d42d49</span><br><span class="line">  Author: kalyo-zjl &lt;zjialiang@zju.edu.cn&gt;</span><br><span class="line">  Date:   Sat Jun 18 14:29:01 2016 +0800</span><br><span class="line">  </span><br><span class="line">      new file</span><br></pre></td></tr></table></figure>
<p>在git中，用HEAD表示当前版本，ID就是commit后面一大串的数字，上一个版本就是HEAD^<br>上上个为HEAD^^，前100个版本就是HEAD~100</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 版本回退</span></span><br><span class="line">$ git reset --hard HEAD^</span><br><span class="line">$ git reset --hard 2aa9214  <span class="comment"># 后面这一串实际上就是版本号，写出来部分系统就会自己找</span></span><br><span class="line"></span><br><span class="line">$ git reflog        <span class="comment"># 显示每次使用的命令以及当时的版本号</span></span><br><span class="line"></span><br><span class="line">$ git checkout -- filename  <span class="comment"># 丢弃工作区的修改，回到最近一次git commit或git add</span></span><br></pre></td></tr></table></figure>
<h3 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h3><p>最好工作都在分支上进行，然后最后再将分支内容合并到master上，确保安全<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git branch                <span class="comment"># 查看分支</span></span><br><span class="line">$ git branch &lt;name&gt;         <span class="comment"># 创建分支</span></span><br><span class="line">$ git checkout &lt;name&gt;       <span class="comment"># 切换分支</span></span><br><span class="line">$ git checkout -b &lt;name&gt;    <span class="comment"># 创建并切换分支</span></span><br><span class="line">$ git merge &lt;name&gt;          <span class="comment"># 合并分支到当前分支</span></span><br><span class="line">$ git branch <span class="_">-d</span> &lt;name&gt;      <span class="comment"># 删除分支</span></span><br></pre></td></tr></table></figure></p>
<p>合并分支的时候可能会出现冲突的问题，必须先手动解决冲突,可以用git log –graph查看分支合并图</p>
<p>在分支合并的时候用如下命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --no-ff -m <span class="string">'merge with no-ff'</span> dev</span><br></pre></td></tr></table></figure></p>
<p>可以强制禁用Fast forward模式，这样不是简单的指针位置换一下，而是可以看到master和分支两条线，这样就能看出来在哪里做过合并。</p>
<h4 id="bug分支"><a href="#bug分支" class="headerlink" title="bug分支"></a>bug分支</h4><p>你当前分支的任务没有完成，还不能提交，但是又临时需要先去修改其他分支的bug的时候，可以使用如下操作<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git stash                 <span class="comment"># 将当前工作现场临时存储起来</span></span><br><span class="line">Saved working directory and index state WIP on dev: 6224937 add merge</span><br><span class="line">HEAD is now at 6224937</span><br><span class="line"></span><br><span class="line">$ git checkout master       <span class="comment"># 现在就可以转到其他分支去修复bug什么的了</span></span><br><span class="line">$ ...</span><br><span class="line"><span class="comment"># 修复完成后</span></span><br><span class="line">$ git checkout dev          <span class="comment"># 回到dev分支</span></span><br><span class="line">$ git stash list            <span class="comment"># 可以查看当时的工作现场</span></span><br><span class="line">$ git stash pop             <span class="comment"># 恢复工作现场，同时将stash的内容删除</span></span><br></pre></td></tr></table></figure></p>
<h3 id="自定义git"><a href="#自定义git" class="headerlink" title="自定义git"></a>自定义git</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global color.ui <span class="literal">true</span></span><br><span class="line">$ git config --global alias.st status       <span class="comment">#配置别名st为status</span></span><br><span class="line">$ git config --global alias.lg <span class="string">"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit"</span></span><br></pre></td></tr></table></figure>
<h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><p><strong>创建SSH KEY</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">"zjialiang@zju.edu.cn"</span></span><br><span class="line"><span class="comment"># 生成的key默认在~/.ssh下，id_rsa是密钥，id_rsa.pub是公钥</span></span><br></pre></td></tr></table></figure>
<p><strong>登陆Github-&gt;Account-&gt;SSH Keys-&gt;Add SSH Key.在Key文本框中粘贴id_rsa.pub文件中的内容</strong></p>
<h3 id="一台电脑管理多个github账号"><a href="#一台电脑管理多个github账号" class="headerlink" title="一台电脑管理多个github账号"></a>一台电脑管理多个github账号</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">"first@xxx.cn"</span>  <span class="comment"># 创建第一个公钥秘钥，设置文件名为f1,f1.pub</span></span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">"second@xxx.cn"</span> <span class="comment"># f2,f2.pub</span></span><br><span class="line"><span class="comment"># 在两个github账号下将pub里的公钥填入</span></span><br><span class="line"></span><br><span class="line">$ ssh-add f1    <span class="comment"># 将秘钥加入</span></span><br><span class="line">$ ssh-add f2</span><br><span class="line"><span class="comment"># 现在存在的问题就是你在和远程github进行数据传输的时候，得告诉电脑你的秘钥是什么</span></span><br><span class="line"><span class="comment"># 设置一个config文件，来分配不同的秘钥，如下</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#----config----</span></span><br><span class="line">Host first-name</span><br><span class="line">HostName github.com</span><br><span class="line">User git </span><br><span class="line">IdentityFile f1         <span class="comment"># 秘钥文件</span></span><br><span class="line"></span><br><span class="line">Host second-name</span><br><span class="line">HostName github.com</span><br><span class="line">User git </span><br><span class="line">IdentityFile f2</span><br><span class="line"><span class="comment">#--------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后authentic，可能类似于身份确认</span></span><br><span class="line">$ ssh -T first-name</span><br><span class="line">$ ssh -T second-name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后push到第一个github上的时候，最重要的一步</span></span><br><span class="line">$ git push git@first-name:xxx/xxx.git master</span><br><span class="line"><span class="comment"># 应该这里的first-name就是它去找对应的config文件下Host的名字所对应的秘钥</span></span><br><span class="line"><span class="comment"># 从github上copy下来默认的是github.com，需要进行修改！！</span></span><br><span class="line"><span class="comment"># 否则会出现 </span></span><br><span class="line">$ Permission to A denied to B</span><br><span class="line"></span><br><span class="line">$ git config user.name      <span class="comment">#不是很了解这个有什么用，只设置了一个用户名和邮箱</span></span><br><span class="line">$ git config user.email     <span class="comment">#照样可以在两个github上进行操作</span></span><br><span class="line"><span class="comment"># 使用git log的时候会显示用户名和邮箱</span></span><br></pre></td></tr></table></figure>
<h3 id="远程仓库和本地仓库的交互"><a href="#远程仓库和本地仓库的交互" class="headerlink" title="远程仓库和本地仓库的交互"></a>远程仓库和本地仓库的交互</h3><h4 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> -b &lt;版本号&gt; &lt;版本库网址&gt; &lt;本地目录名&gt;</span><br></pre></td></tr></table></figure>
<h4 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h4><p>用于管理远程主机名<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v             <span class="comment"># 查看远程主机名与网址</span></span><br><span class="line">$ git remote add &lt;主机名&gt; &lt;网址&gt;</span><br><span class="line">$ git remote rm &lt;主机名&gt;</span><br><span class="line">$ git remote rename &lt;原主机名&gt; &lt;新主机名&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch &lt;远程主机名&gt; &lt;分支名&gt;</span><br><span class="line"><span class="comment"># 取回的更新在本地要用"远程主机名/分支名"的形式读取</span></span><br><span class="line">$ git branch -r             <span class="comment"># 查看远程分支</span></span><br><span class="line">$ git branch <span class="_">-a</span>             <span class="comment"># 查看所有分支</span></span><br><span class="line"></span><br><span class="line">$ git checkout -b newBranch origin/master       <span class="comment"># 创建新分支</span></span><br><span class="line">$ git merge origin/master                       <span class="comment"># 合并到当前分支</span></span><br><span class="line"><span class="comment"># git pull的过程相当于将fetch和merge两步合到一起了</span></span><br></pre></td></tr></table></figure>
<h4 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</span><br></pre></td></tr></table></figure>
<h4 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</span><br></pre></td></tr></table></figure>
<h4 id="example"><a href="#example" class="headerlink" title="example"></a>example</h4><p>假设已经创建远程仓库learngit，本地仓库test<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将远程仓库命名为origin</span></span><br><span class="line">$ git remote add origin git@github.com:kalyo-zjl/learngit.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将本地仓库master推送的远程仓库origin</span></span><br><span class="line">$ git push origin master        <span class="comment"># master可以换成像dev之类的本地仓库</span></span><br><span class="line"><span class="comment"># 默认情况下，远程也会生成一个与dev或master同名的分支</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果有文件冲突问题，需要将远程文件pull下来，解决冲突后再push过去</span></span><br><span class="line">$ git pull origin master        <span class="comment"># 将远程的master分支下载下来，并与本地当前分支进行合并</span></span><br><span class="line">$ git pull origin dev           <span class="comment"># 将远程dev分支下载下来，与本地当前分支合并</span></span><br></pre></td></tr></table></figure></p>
</div></article></div><div class="tags"><a href="/tags/github/">github</a></div><div class="paginator"><a href="/2016/06/25/Hexo/" class="prev"><i class="fa fa-chevron-left"></i><span> Prev</span></a><a href="/2016/06/12/learning_linux/" class="next"><span>Next</span><i class="fa fa-chevron-right"></i></a></div></section><footer><label for="sidebar-toggle" class="sidebar-menu"><i class="fa fa-bars"></i></label><label id="back2top"> <i class="fa fa-chevron-up"></i></label><div class="copyright"><p>© 2016<span class="heart"><i class="icon-next-heart fa fa-heart"></i></span><a href="http://yoursite.com">zjl</a></p></div></footer></div></body><script src="/js/back2top.js"></script></html>