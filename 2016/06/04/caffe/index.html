<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Caffe with Ubuntu14.04 · KaLyo's Notes</title><meta name="description" content="Caffe with Ubuntu14.04 - zjl"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><!-- fonts--><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="http://fonts.lug.ustc.edu.cn/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><input type="checkbox" id="sidebar-toggle" checked><aside><div class="author"><a href="/."><img src="/img/author.png" class="author-img"></a><h2 class="author-name">zjl</h2></div><div class="post-toc"><span class="toc-title">Directory</span><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Dependencies"><span class="toc-text">Dependencies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Compilation"><span class="toc-text">Compilation</span></a></li></ol></div><div class="social"><span class="title">Social</span><ul class="links"><li class="link-item"><a href="mailto:zjialiang@zju.edu.cn"><div class="iconfont icon-email"> </div>email</a></li><li class="link-item"><a href="https://github.com/kalyo-zjl"><div class="iconfont icon-github"> </div>github</a></li><li class="link-item"><a href="http://weibo.com/3628435143/profile?topnav=1&amp;wvr=6&amp;is_all=1"><div class="iconfont icon-weibo"> </div>weibo</a></li><li class="link-item"><a href="https://www.zhihu.com/people/rangnixinyue"><div class="iconfont icon-zhihu"> </div>zhihu</a></li></ul></div></aside><div class="main"><header><div id="top"><a href="/." class="logo-link">KaLyo's Notes</a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">Archives</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">Tags</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">About</a></li></ul></div></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Caffe with Ubuntu14.04</h1><div class="post-time">Jun 4, 2016</div><div class="post-content"><p>Following the guidance of <a href="http://caffe.berkeleyvision.org/install_apt.html" target="_blank" rel="external">Caffe Official WebSite</a></p>
<h2 id="Dependencies"><a href="#Dependencies" class="headerlink" title="Dependencies"></a>Dependencies</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler</span><br><span class="line">$ sudo apt-get install --no-install-recommends libboost-all-dev</span><br></pre></td></tr></table></figure>
<ul>
<li><p>CUDA &amp; CuDNN<br>Download xx.run file from <a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="external">NVIDA Official Website</a></p>
<a id="more"></a>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo /etc/init.d/lightdm stop </span><br><span class="line">$ ./xx.run     <span class="comment"># install CUDA 7.5</span></span><br><span class="line"><span class="comment"># Download cudnn.h and .so , put them in cuda path(bin and include)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>BLAS<br>Download from <a href="http://www.openblas.net/" target="_blank" rel="external">http://www.openblas.net/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ tar -xzvf OpenBLAS-0.2.18.tar.gz</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> OpenBLAS-0.2.18</span><br><span class="line">$ make -j8</span><br><span class="line">$ sudo make install</span><br><span class="line"><span class="comment"># OpenBLAS installed in /opt/OpenBLAS</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># option</span></span><br><span class="line">$ sudo apt-get install libatlas-base-dev</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev</span><br></pre></td></tr></table></figure>
<h2 id="Compilation"><a href="#Compilation" class="headerlink" title="Compilation"></a>Compilation</h2><p>Two ways of compilation<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMake</span></span><br><span class="line">$ mkdir build   (path to install)</span><br><span class="line">$ <span class="built_in">cd</span> build</span><br><span class="line">$ cmake ..      (it seems nothing to <span class="keyword">do</span> with Makefile.config)</span><br><span class="line"><span class="comment"># use Blas Atlas (even if I change it to open in Makefile.config)</span></span><br><span class="line"><span class="comment"># use MATLAB = 0</span></span><br><span class="line"><span class="comment"># use python = 1</span></span><br><span class="line">$ make all</span><br><span class="line">$ make install</span><br><span class="line">$ make runtest</span><br><span class="line"><span class="comment"># DONE!</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Make</span></span><br><span class="line">$ cp Makefile.config.example Makefile.config</span><br><span class="line"><span class="comment"># several lines to change as below</span></span><br><span class="line">Use_CUDNN := 1</span><br><span class="line">BLAS := open</span><br><span class="line"></span><br><span class="line">BLAS_INCLUDE := /opt/OpenBLAS/include</span><br><span class="line">BLAS_LIB := /opt/OpenBLAS/lib</span><br><span class="line"></span><br><span class="line">MATLAB_DIR := /usr/<span class="built_in">local</span>/MATLAB/R2014b</span><br><span class="line"></span><br><span class="line">USE_PKG_CONFIG := 1</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ make all</span><br><span class="line">$ make <span class="built_in">test</span></span><br><span class="line">$ make run <span class="built_in">test</span></span><br></pre></td></tr></table></figure>
</div></article></div><div class="tags"><a href="/tags/caffe-ubuntu-cuda/">caffe ubuntu cuda</a></div><div class="paginator"><a href="/2016/06/07/Vim/" class="prev"><i class="fa fa-chevron-left"></i><span> Prev</span></a></div></section><section id="comments"><div data-thread-key="http://yoursite.com/2016/06/04/caffe/index.html" data-title="Caffe with Ubuntu14.04" data-url="http://yoursite.com/2016/06/04/caffe/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "kalyo-zjl" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section><footer><label for="sidebar-toggle" class="sidebar-menu"><i class="fa fa-bars"></i></label><label id="back2top"> <i class="fa fa-chevron-up"></i></label><div class="copyright"><p>© 2016<span class="heart"><i class="icon-next-heart fa fa-heart"></i></span><a href="http://yoursite.com">zjl</a></p></div></footer></div></body><script src="/js/back2top.js"></script></html>